
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Android Â· Lottie</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="android.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="android.html">
            
                <a href="android.html">
            
                    
                    Android
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="android.html">
            
                <a href="android.html#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="android.html">
            
                <a href="android.html#sample-app">
            
                    
                    Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="basic-workflow.html">
            
                <a href="basic-workflow.html">
            
                    
                    Basic Workflow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="caching.html">
            
                <a href="caching.html">
            
                    
                    Caching and Preloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="dynamic.html">
            
                <a href="dynamic.html">
            
                    
                    Dynamic Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="images.html">
            
                <a href="images.html">
            
                    
                    Images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="performance.html">
            
                <a href="performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="avd.html">
            
                <a href="avd.html">
            
                    
                    Lottie vs AVD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="apk-size.html">
            
                <a href="apk-size.html">
            
                    
                    APK size
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="troubleshooting.html">
            
                <a href="troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="contributing.html">
            
                <a href="contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../ios.html">
            
                <a href="../ios.html">
            
                    
                    iOS/MacOS
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Docs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../ios.html">
            
                <a href="../ios.html#getting-started-on-ios-or-macos">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../ios.html">
            
                <a href="../ios.html#installing-lottie">
            
                    
                    Installing Lottie
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../ios.html">
            
                <a href="../ios.html#ios-sample-app">
            
                    
                    iOS Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.4" data-path="../ios.html">
            
                <a href="../ios.html#macos-sample-app">
            
                    
                    MacOS Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.5" data-path="../ios.html">
            
                <a href="../ios.html#objective-c-examples">
            
                    
                    Objective C Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.6" data-path="../ios.html">
            
                <a href="../ios.html#swift-examples">
            
                    
                    Swift Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.7" data-path="../ios/view-controllers.html">
            
                <a href="../ios/view-controllers.html">
            
                    
                    View Controller Transitions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.8" data-path="../ios/dynamic.html">
            
                <a href="../ios/dynamic.html">
            
                    
                    Dynamic Properties
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.9" data-path="../ios/addsubviews.html">
            
                <a href="../ios/addsubviews.html">
            
                    
                    Adding Views to Animation at Runtime
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../ios/dynamic_properties.html">
            
                <a href="../ios/dynamic_properties.html">
            
                    
                    Building a Dynamic Progress Loader
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    Troubleshooting
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../ios/performance.html">
            
                <a href="../ios/performance.html">
            
                    
                    Performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../ios/troubleshooting.html">
            
                <a href="../ios/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../react-native/react-native.html">
            
                <a href="../react-native/react-native.html">
            
                    
                    React Native
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../react-native/react-native.html">
            
                <a href="../react-native/react-native.html#getting-started">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../react-native/sample-app.html">
            
                <a href="../react-native/sample-app.html">
            
                    
                    Sample App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../react-native/props.html">
            
                <a href="../react-native/props.html">
            
                    
                    Props
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../react-native/troubleshooting.html">
            
                <a href="../react-native/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../web/web.html">
            
                <a href="../web/web.html">
            
                    
                    Web
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../web/getting-started.html">
            
                <a href="../web/getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <a target="_blank" href="https://www.youtube.com/watch?v=5XMUJdjI0L8">
            
                    
                    Video tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../web/previewing.html">
            
                <a href="../web/previewing.html">
            
                    
                    Previewing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../web/expressions.html">
            
                <a href="../web/expressions.html">
            
                    
                    Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../after-effects/troubleshooting.html">
            
                <a href="../after-effects/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../after-effects/getting-started.html">
            
                <a href="../after-effects/getting-started.html">
            
                    
                    After Effects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../after-effects/getting-started.html">
            
                <a href="../after-effects/getting-started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../after-effects/bodymovin-installation.html">
            
                <a href="../after-effects/bodymovin-installation.html">
            
                    
                    Install Bodymovin Plugin
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../after-effects/bodymovin-settings.html">
            
                <a href="../after-effects/bodymovin-settings.html">
            
                    
                    Bodymovin settings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../after-effects/general-tips.html">
            
                <a href="../after-effects/general-tips.html">
            
                    
                    General tips & guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../after-effects/artwork-to-lottie-walkthrough.html">
            
                <a href="../after-effects/artwork-to-lottie-walkthrough.html">
            
                    
                    Sketch/SVG/Illustrator to Lottie walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../after-effects/illustrator-to-lottie-walkthrough.html">
            
                <a href="../after-effects/illustrator-to-lottie-walkthrough.html">
            
                    
                    Advanced Illustrator to Lottie walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../after-effects/troubleshooting.html">
            
                <a href="../after-effects/troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../supported-features.html">
            
                <a href="../supported-features.html">
            
                    
                    Supported After Effects Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../other-platforms.html">
            
                <a href="../other-platforms.html">
            
                    
                    Other Platforms
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <span>
            
                    
                    Mobile
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" >
            
                <a target="_blank" href="https: //github.com/martijn00/LottieXamarin">
            
                    
                    Xamarin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" >
            
                <a target="_blank" href="https://github.com/bradmartin/nativescript-lottie">
            
                    
                    NativeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.3" >
            
                <a target="_blank" href="https://github.com/m1ga/ti.animation">
            
                    
                    Titanium
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.4" >
            
                <a target="_blank" href="https://github.com/azchohfi/LottieUWP">
            
                    
                    Windows (UWP)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" >
            
                <span>
            
                    
                    Web Frameworks
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" >
            
                <a target="_blank" href="https://github.com/chenqingspring/react-lottie">
            
                    
                    React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" >
            
                <a target="_blank" href="https://github.com/chenqingspring/vue-lottie">
            
                    
                    Vue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" >
            
                <a target="_blank" href="https://github.com/chenqingspring/ng-lottie">
            
                    
                    Angular
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../troubleshooting.html">
            
                <a href="../troubleshooting.html">
            
                    
                    Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../community-showcase.html">
            
                <a href="../community-showcase.html">
            
                    
                    Community Showcase
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Android</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="getting-started"><a name="getting-started" class="plugin-anchor" href="#getting-started"><i class="fa fa-link" aria-hidden="true"></i></a>Getting Started</h1>
<p>Gradle is the only supported build configuration, so just add the dependency to your project <code>build.gradle</code> file:</p>
<pre class="language-"><code class="lang-groovy">dependencies <span class="token punctuation">{</span>
    <span class="token punctuation">...</span>
    compile <span class="token string">&apos;com.airbnb.android:lottie:2.5.1&apos;</span>
    <span class="token punctuation">...</span>
<span class="token punctuation">}</span>
</code></pre>

<h1 id="loading-an-animation"><a name="loading-an-animation" class="plugin-anchor" href="#loading-an-animation"><i class="fa fa-link" aria-hidden="true"></i></a>Loading an Animation</h1>
<h3 id="from-xml"><a name="from-xml" class="plugin-anchor" href="#from-xml"><i class="fa fa-link" aria-hidden="true"></i></a>From XML</h3>
<p>Lottie supports API 16 and above.
The simplest way to use it is with LottieAnimationView:</p>
<p>Lottie support loading bundled animations from res/raw or assets/.
It is recommended to use res/raw because you can use static references to your animationt through <code>R</code> instead of just using string names. This can also aid in build static analysis because it can track the usage of your animations.</p>
<h4 id="from-resraw-lottierawres-or-assets-lottiefilename"><a name="from-resraw-lottierawres-or-assets-lottiefilename" class="plugin-anchor" href="#from-resraw-lottierawres-or-assets-lottiefilename"><i class="fa fa-link" aria-hidden="true"></i></a>From res/raw (<code>lottie_rawRes</code>) or assets/ (<code>lottie_fileName</code>)</h4>
<pre class="language-"><code class="lang-xml">&lt;com.airbnb.lottie.LottieAnimationView
        android:id=&quot;@+id/animation_view&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;

        app:lottie_rawRes=&quot;@raw/hello_world&quot;
        // or
        app:lottie_fileName=&quot;hello_world.json&quot;

        // Loop indefinitely
        app:lottie_loop=&quot;true&quot;
        // Start playing as soon as the animation is loaded
        app:lottie_autoPlay=&quot;true&quot; /&gt;
</code></pre>
<h3 id="programmatically"><a name="programmatically" class="plugin-anchor" href="#programmatically"><i class="fa fa-link" aria-hidden="true"></i></a>Programmatically</h3>
<p>Or you can load it programmatically in multiple ways. When the animation is loaded, it asynchronously deserializes the composition. Any API calls such as <code>playAnimation()</code> <code>setMinFrame(...)</code> or anything else will be deferred until the composition is loaded.</p>
<h3 id="from-resraw-or-assets"><a name="from-resraw-or-assets" class="plugin-anchor" href="#from-resraw-or-assets"><i class="fa fa-link" aria-hidden="true"></i></a>From res/raw or assets/</h3>
<pre class="language-"><code class="lang-java">LottieAnimationView animationView <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

animationView<span class="token punctuation">.</span><span class="token function">setAnimation</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>raw<span class="token punctuation">.</span>hello_world<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// or</span>
animationView<span class="token punctuation">.</span><span class="token function">setAnimation</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>raw<span class="token punctuation">.</span>hello_world<span class="token punctuation">.</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

animationView<span class="token punctuation">.</span><span class="token function">playAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This method will load the file and parse the animation in the background and asynchronously start rendering once completed.</p>
<h3 id="from-a-network-request"><a name="from-a-network-request" class="plugin-anchor" href="#from-a-network-request"><i class="fa fa-link" aria-hidden="true"></i></a>From a network request</h3>
<p>One advantage of Lottie is that you can load an animation from a network request. To do so, you should start with the json body of your response in a String format. Lottie uses a streaming json deserializer to improve performance and memory usage so do not convert it to a JSONObject on your own. That will only hurt performance.</p>
<pre class="language-"><code class="lang-java">LottieAnimationView animationView <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment" spellcheck="true">// This allows lottie to use the streaming deserializer mentioned above.</span>
JsonReader jsonReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
animationView<span class="token punctuation">.</span><span class="token function">setAnimation</span><span class="token punctuation">(</span>jsonReader<span class="token punctuation">)</span>
animationView<span class="token punctuation">.</span>playAnimation
</code></pre>
<h3 id="caching-animations"><a name="caching-animations" class="plugin-anchor" href="#caching-animations"><i class="fa fa-link" aria-hidden="true"></i></a>Caching Animations</h3>
<p>There may be animations in your app that are used frequently such as a heart, loader, etc. To avoid the overhead of loading the file and deserializing it each time, you can set a cache strategy on your animation. All of the <code>setAnimation</code> APIs above can take an optional second parameter <code>CacheStrategy</code>. By default, Lottie will hold a weak reference to your animation which should be sufficient for most use cases. However, if you know that an animation will definitely be used frequently, change it to <code>CacheStrategy.Strong</code> or if you know that it is large and won&apos;t be used frequently, change it to <code>CacheStrategy.None</code>.</p>
<h3 id="using-lottie-as-a-drawable-instead-of-a-view"><a name="using-lottie-as-a-drawable-instead-of-a-view" class="plugin-anchor" href="#using-lottie-as-a-drawable-instead-of-a-view"><i class="fa fa-link" aria-hidden="true"></i></a>Using Lottie as a Drawable instead of a View</h3>
<p>LottieAnimationView is an ImageView wrapper around LottieDrawable. All of the APIs on LottieAnimationView are mirrored on LottieDrawable so you can create your own instance of it and use it anywhere you would use a drawable such as your own custom views or in a menu.</p>
<h3 id="using-lottiecomposition-to-preload-an-animation"><a name="using-lottiecomposition-to-preload-an-animation" class="plugin-anchor" href="#using-lottiecomposition-to-preload-an-animation"><i class="fa fa-link" aria-hidden="true"></i></a>Using LottieComposition to preload an animation</h3>
<p>The backing model for an animation is a LottieComposition. In most cases, calling <code>setAnimation(...)</code> on <code>LottieAnimationView</code> or <code>LottieDrawable</code> is sufficent. However, if you want to preload an animation so it is instantly available, you may use the <code>LottieComposition.Factory</code> APIs which will return a LottieComposition object that you can set directly on a <code>LottieAnimationView</code> or <code>LottieDrawable</code>.
Again, it isn&apos;t normally necessary to add the overhead of managing compositions yourself. The default caching in LottieAnimationView is sufficient for most use cases.</p>
<p>Example</p>
<pre class="language-"><code class="lang-java"> LottieAnimationView animationView <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 Cancellable compositionLoader <span class="token operator">=</span> LottieComposition<span class="token punctuation">.</span>Factory<span class="token punctuation">.</span><span class="token function">fromJsonString</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> jsonString<span class="token punctuation">,</span> <span class="token punctuation">(</span>composition<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
     animationView<span class="token punctuation">.</span><span class="token function">setComposition</span><span class="token punctuation">(</span>composition<span class="token punctuation">)</span><span class="token punctuation">;</span>
     animationView<span class="token punctuation">.</span><span class="token function">playAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token comment" spellcheck="true">// Cancel to stop asynchronous loading of composition</span>
 <span class="token comment" spellcheck="true">// compositionCancellable.cancel();</span>
</code></pre>
<h1 id="animation-listeners"><a name="animation-listeners" class="plugin-anchor" href="#animation-listeners"><i class="fa fa-link" aria-hidden="true"></i></a>Animation Listeners</h1>
<p>You can control the animation or add listeners:</p>
<pre class="language-"><code class="lang-java">animationView<span class="token punctuation">.</span><span class="token function">addAnimatorUpdateListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>animation<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Do something.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
animationView<span class="token punctuation">.</span><span class="token function">playAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>animationView<span class="token punctuation">.</span><span class="token function">isAnimating</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Do something.</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
animationView<span class="token punctuation">.</span><span class="token function">setProgress</span><span class="token punctuation">(</span><span class="token number">0.5f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p>In the update listener callback:
<code>animation.getAnimatedValue()</code> will return the progres of the animation regardless of the currently set min/max frame [0,1].</p>
<p><code>animation.getAnimatedFraction()</code> will return the progress of the animation taking into account the set min/max frame [minFrame,maxFrame].</p>
<h3 id="custom-animators"><a name="custom-animators" class="plugin-anchor" href="#custom-animators"><i class="fa fa-link" aria-hidden="true"></i></a>Custom animators</h3>
<p>Although <code>playAnimation()</code> is sufficient for the vast majority of use cases, you can call <code>setProgress(...)</code> in the update callback for your own animator.</p>
<pre class="language-"><code class="lang-java"><span class="token comment" spellcheck="true">// Custom animation speed or duration.</span>
ValueAnimator animator <span class="token operator">=</span> ValueAnimator<span class="token punctuation">.</span><span class="token function">ofFloat</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
animator<span class="token punctuation">.</span><span class="token function">addUpdateListener</span><span class="token punctuation">(</span>animation <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    animationView<span class="token punctuation">.</span><span class="token function">setProgress</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span><span class="token function">getAnimatedValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
animator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h1 id="looping"><a name="looping" class="plugin-anchor" href="#looping"><i class="fa fa-link" aria-hidden="true"></i></a>Looping</h1>
<p>Lottie support advanced looping functionality that mirrors <code>ValueAnimator</code>. As such, you can call <code>setRepeatMode(...)</code> or <code>setRepeatCount(...)</code> as you would on a <code>ValueAnimator</code>
You can also enable looping from xml with <code>lottie_loop=&quot;true&quot;</code></p>
<h1 id="animation-scale"><a name="animation-scale" class="plugin-anchor" href="#animation-scale"><i class="fa fa-link" aria-hidden="true"></i></a>Animation Scale</h1>
<p><em><strong>Lottie converts all px values in After Effects to dps</strong></em> on device so that everything is rendered at the same size across devices. This means that instead of making an animation in After Effects that is 1920x1080, it should be more like 411x731px in After Effects which roughly corresponds to the dp screen size of most phones today.</p>
<p>However, if your animation isn&apos;t the perfect size, you have two options:</p>
<h3 id="imageview-scaletype"><a name="imageview-scaletype" class="plugin-anchor" href="#imageview-scaletype"><i class="fa fa-link" aria-hidden="true"></i></a>ImageView <code>scaleType</code></h3>
<p>LottieAnimationView is a wrapped <code>ImageView</code> and it supports <code>centerCrop</code> and <code>centerInside</code> so you may use those two as you would with any other image.</p>
<h3 id="lottie-setscale"><a name="lottie-setscale" class="plugin-anchor" href="#lottie-setscale"><i class="fa fa-link" aria-hidden="true"></i></a>Lottie <code>setScale(...)</code></h3>
<p><code>LottieAnimationView</code> and <code>LottieDrawable</code> both have a <code>setScale(float)</code> API that you can use to manually scale up or down your animation. This is rarely useful but can be in certain situations.</p>
<p>If your animation is performing slowly, make sure to check the documentation on <a href="performance.html">performance</a>. However, try scaling your animation down in combination with a scaleType. This will reduce the amount that Lottie renders per frame. This is particularly helpful if you have large mattes or masks.</p>
<h1 id="play-animation-segments"><a name="play-animation-segments" class="plugin-anchor" href="#play-animation-segments"><i class="fa fa-link" aria-hidden="true"></i></a>Play Animation Segments</h1>
<p>It is often convenient to play/loop a single part of an animation. For example, you may have an &quot;on&quot; state for the first half of your animation and an &quot;off&quot; state for second half. <code>LottieAnimationView</code> and <code>LottieDrawable</code> have:</p>
<p> <code>setMinFrame(...)</code></p>
<p> <code>setMinFrame(...)</code></p>
<p> <code>setMaxProgress(...)</code></p>
<p> <code>setMaxProgress(...)</code></p>
<p> <code>setMinAndMaxFrame(...)</code></p>
<p> <code>setMinAndMaxProgress(...)</code></p>
<p> APIs to control the current segment. Looping APIs will respect the min/max frame set here.</p>
<h1 id="hardware-acceleration"><a name="hardware-acceleration" class="plugin-anchor" href="#hardware-acceleration"><i class="fa fa-link" aria-hidden="true"></i></a>Hardware Acceleration</h1>
<p>Lottie supports hardware acceleration but it is disabled out of the box. Read <a href="https://developer.android.com/guide/topics/graphics/hardware-accel.html" target="_blank">this article</a> to learn more about hardware acceleration. It is disabled by default because it doesn&apos;t support anti-aliasing, stroke caps (pre-API 18), and a few other things. In addition, depending on the animation, they may actually be less performant. Read <a href="http://blog.danlew.net/2015/10/20/using-hardware-layers-to-improve-animation-performance/" target="_blank">this article</a> to understand why.</p>
<p>If you are having performance issues with your animation, make sure to read the <a href="performance.html">performance</a> docs first. There is more information about how to benchmark and determine if your animation would benefit from hardware acceleration there.</p>
<h1 id="merge-paths"><a name="merge-paths" class="plugin-anchor" href="#merge-paths"><i class="fa fa-link" aria-hidden="true"></i></a>Merge Paths</h1>
<p>Merge paths are only supported on KitKat and above. There is also some performance overhead in using them because <a href="https://developer.android.com/reference/android/graphics/Path.html#op(android.graphics.Path,%20android.graphics.Path.Op" target="_blank">Path.Op</a> can be slow. To prevent engineers from testing on new devices with merge paths enabled while shipping a broken experience to users on older phones, they are disabled by default. If your <code>minSdk</code> is &gt;=19 then you can enable then with <code>enableMergePathsForKitKatAndAbove()</code></p>
<h1 id="sample-app"><a name="sample-app" class="plugin-anchor" href="#sample-app"><i class="fa fa-link" aria-hidden="true"></i></a>Sample App</h1>
<p>You can build the sample app yourself or download it from the <a href="https://play.google.com/store/apps/details?id=com.airbnb.lottie" target="_blank">Play Store</a>. The sample app includes some built in animations but also allows you to load an animation from internal storage or from a url.
<br>
<a href="https://play.google.com/store/apps/details?id=com.airbnb.lottie" target="_blank"><img alt="Get it on Google Play" src="https://play.google.com/intl/en_us/badges/images/generic/en_badge_web_generic.png" height="80px"></a></p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="android.html#getting-started" class="navigation navigation-next " aria-label="Next page: Getting Started">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Android","level":"1.2","depth":1,"next":{"title":"Getting Started","level":"1.2.1","depth":2,"anchor":"#getting-started","path":"android/android.md","ref":"android/android.md#getting-started","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism@2.3.0","-highlight","github","-search","codeblock-disable-glossary","collapsible-chapters","anchors"],"root":"./docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/airbnb/lottie/"},"collapsible-chapters":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"codeblock-disable-glossary":{},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/airbnb/lottie/edit/lottie-docs/docs/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"androidVersion":"2.5.1","iosVersion":"2.5.0","reactNativeVersion":"2.3.2"},"title":"Lottie","gitbook":"3.2.3","description":"After Effects Animations for Android, iOS, React Native, and Web"},"file":{"path":"android/android.md","mtime":"2018-03-24T18:10:56.356Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-24T21:42:09.235Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-codeblock-disable-glossary/disable-glossary.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-chapters/collapsible-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

